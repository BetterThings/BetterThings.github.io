var msos={default_locale:(document.getElementsByTagName("html")[0].getAttribute("lang")||"en"),default_translate:"fr",default_country:{en:"US",fr:"FR",de:"DE"},default_keyboard_locales:["en","fr","de","es"],base_site_url:"//"+document.domain,base_script_url:"",base_config_url:"",base_images_url:"",body:null,head:null,html:null,docl:null,ajax_loading_kbps:{},deferred_css:[],deferred_scripts:[],dom:{},form_inputs:null,form_validate:null,html_inputs:["text","file","password","textarea","radio","checkbox","select"],html5_attributes:["autocomplete","autofocus","list","placeholder","max","min","maxlength","multiple","pattern","required","step"],html5_inputs:["search","tel","url","email","datetime","date","month","week","time","datetime-local","number","range","color"],i18n_order:[],i18n_queue:0,log_methods:["error","warn","info","debug","time","timeEnd","log"],onload_func_pre:[],onload_func_start:[],onload_functions:[],onload_func_done:[],onload_func_post:[],ondisplay_size_change:[],onorientationchange_functions:[],onresize_functions:[],record_times:{},registered_files:{js:{},css:{},ico:{},ajax:{}},registered_folders:{msos:"",jquery:"",apps:""},registered_modules:{msos:false},registered_templates:{},registered_tools:{},require_attempts:0,require_deferred:0,require_queue:0};msos.config={console:false,clear_cookies:false,clear_storage:false,debug:false,debug_css:false,debug_output:false,debug_script:false,mobile:false,verbose:false,visualevent:false,run_ads:false,run_size:false,run_analytics:false,run_onerror:false,run_overflowscroll:false,run_social:false,run_translate:false,run_amazon_prev:false,browser:{advanced:false,current:false,direction:"",editable:false,mobile:false,touch:false},cache:true,color:{bk:"black",wh:"white",dg:"darkgrey",lg:"lightgrey",sl:"salmon",lb:"lightblue",rd:"red",be:"beige"},connection:{type:0,bandwidth:10,metered:false},cookie:{site_pref:{name:"msos_site_pref",value:"",set:false,params:{expires:30}},site_i18n:{name:"msos_site_i18n",value:"",set:false,params:{expires:30}},site_cart:{name:"msos_site_cart",value:"",set:false,params:{expires:1}},site_cltl:{name:"msos_site_cltl",value:"",set:false,params:{expires:15}},site_bdwd:{name:"msos_site_bdwd",value:"",set:false,params:{expires:1}},site_tabs:{name:"msos_site_tab_",params:{expires:1}},site_sdmn:{name:"msos_site_sdm_",params:{expires:1}},site_popu:{name:"msos_site_pop_",params:{expires:1}}},debugging:["console","debug","debug_script","debug_css","debug_output","mobile","verbose","visualevent","run_ads","run_size","run_analytics","run_onerror","run_overflowscroll","run_social","run_translate","run_amazon_prev","use_date","use_color","use_number","use_range","clear_cookies","clear_storage"],doctype:window.document.getElementsByTagName("html")[0].getAttribute("xmlns")?"xhtml5":"html5",file:{"file":(typeof window.File==="object"?true:false),"reader":(typeof window.FileReader==="function"?true:false),"list":(typeof window.FileList==="object"?true:false),"blob":(typeof window.Blob==="object"?true:false)},force_shim:{inputs:{date:true,color:true,number:true,range:true,time:false,month:false,week:false},media:{video:false,audio:false}},google:{no_translate:{},hide_tooltip:{}},hellojs_redirect:"/mobilesiteos/hello/redirect.html",i18n:{select_trans_msos:{},select_kbrds_msos:{}},intl:{select_culture:{},select_calendar:{}},locale:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),culture:(navigator.language||navigator.userLanguage||msos.default_locale).replace("-","_").toLowerCase(),calendar:"standard",json:(typeof JSON==="object"&&typeof JSON.stringify==="function"&&typeof JSON.parse==="function"?true:false),jquery_ui_theme:"mobilesiteos",jquery_ui_avail:{base:"Base (generic)",lightness:"UI-Lightness",mobilesiteos:"MobileSiteOS"},keyboard:"",keyboard_locales:[].concat(msos.default_keyboard_locales),gesture:(function(){"use strict";var el=document.createElement("div");el.setAttribute("ongesturestart","return;");return (typeof el.ongesturestart==="function"?true:false);}()),onerror_uri:"http://"+window.location.hostname+"/onerror.html",orientation:(typeof window.orientation==="number"?true:false),orientation_change:("onorientationchange" in window?true:false),page_uri:window.location.href,pixel_ratio:window.devicePixelRatio||1,popups_blocked:false,query:{},script_onerror:(function(){"use strict";var _1=document.createElement("script");_1.type="text/javascript";_1.setAttribute("onerror","return;");if(typeof _1.onerror==="function"){return true;}return ("onerror" in _1?true:false);}()),script_preload:{available:false,async:false,defer:false,explicit:false,ordered:false,xhr_cache:false},scrolltop:(window.pageXOffset!==undefined||document.documentElement.scrollTop!==undefined?true:false),size:"phone",size_array:[],size_wide:{"desktop":1080,"large":960,"medium":760,"small":640,"tablet":480,"phone":320},social:{},storage:{sessionstorage:{site_bdwd:{name:"msos_site_bdwd",value:"",set:false}},localstorage:{site_form:{name:"msos_site_form",value:"",set:false}}},touch:{ontouchstart:("ontouchstart" in window?true:false),ontouchend:("ontouchend" in document?true:false),object:(typeof window.Touch==="object"?true:false),event:(window.TouchEvent!==undefined?true:false),create:("createTouch" in document?true:false),doc_touch:("DocumentTouch" in window&&document instanceof DocumentTouch?true:false)},view_orientation:{layout:"",direction:"",method:"",numeric:0},view_port:{height:0,width:0,delta_width:0,delta_heigth:0}};(function(_2){var _3={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},_4=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],_5={"anchor":"fragment"},_6={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},_7=/^[0-9]+$/;function _8(_9,_a){var _b=decodeURI(_9),_c=_6[_a||false?"strict":"loose"].exec(_b),_d={attr:{},param:{},seg:{}},i=14;while(i--){_d.attr[_4[i]]=_c[i]||"";}_d.param["query"]=_e(_d.attr["query"]);_d.param["fragment"]=_e(_d.attr["fragment"]);_d.seg["path"]=_d.attr.path.replace(/^\/+|\/+$/g,"").split("/");_d.seg["fragment"]=_d.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");_d.attr["base"]=_d.attr.host?(_d.attr.protocol?_d.attr.protocol+"://"+_d.attr.host:_d.attr.host)+(_d.attr.port?":"+_d.attr.port:""):"";return _d;};function _f(elm){var tn=elm.tagName;if(typeof tn!=="undefined"){return _3[tn.toLowerCase()];}return tn;};function _10(_11,key){if(_11[key].length===0){return _11[key]={};}var t={};for(var i in _11[key]){t[i]=_11[key][i];}_11[key]=t;return t;};function _12(_13,_14,key,val){var _15=_13.shift();if(!_15){if(_16(_14[key])){_14[key].push(val);}else{if("object"==typeof _14[key]){_14[key]=val;}else{if("undefined"==typeof _14[key]){_14[key]=val;}else{_14[key]=[_14[key],val];}}}}else{var obj=_14[key]=_14[key]||[];if("]"==_15){if(_16(obj)){if(""!==val){obj.push(val);}}else{if("object"==typeof obj){obj[_17(obj).length]=val;}else{obj=_14[key]=[_14[key],val];}}}else{if(~_15.indexOf("]")){_15=_15.substr(0,_15.length-1);if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}else{if(!_7.test(_15)&&_16(obj)){obj=_10(_14,key);}_12(_13,obj,_15,val);}}}};function _18(_19,key,val){if(~key.indexOf("]")){var _1a=key.split("[");_12(_1a,_19,"base",val);}else{if(!_7.test(key)&&_16(_19.base)){var t={};for(var k in _19.base){t[k]=_19.base[k];}_19.base=t;}if(key!==""){set(_19.base,key,val);}}return _19;};function _e(str){return _1b(String(str).split(/&|;/),function(ret,_1c){try{_1c=decodeURIComponent(_1c.replace(/\+/g," "));}catch(e){}var eql=_1c.indexOf("="),_1d=_1e(_1c),_4=_1c.substr(0,_1d||eql),val=_1c.substr(_1d||eql,_1c.length);val=val.substr(val.indexOf("=")+1,val.length);if(_4===""){_4=_1c;val="";}return _18(ret,_4,val);},{base:{}}).base;};function set(obj,key,val){var v=obj[key];if(typeof v==="undefined"){obj[key]=val;}else{if(_16(v)){v.push(val);}else{obj[key]=[v,val];}}};function _1e(str){var len=str.length,_1f,c;for(var i=0;i<len;++i){c=str[i];if("]"==c){_1f=false;}if("["==c){_1f=true;}if("="==c&&!_1f){return i;}}};function _1b(obj,_20){var i=0,l=obj.length>>0,_21=arguments[2];while(i<l){if(i in obj){_21=_20.call(undefined,_21,obj[i],i,obj);}++i;}return _21;};function _16(_22){return Object.prototype.toString.call(_22)==="[object Array]";};function _17(obj){var _23=[];for(var _24 in obj){if(obj.hasOwnProperty(_24)){_23.push(_24);}}return _23;};function _25(url,_26){if(arguments.length===1&&url===true){_26=true;url=undefined;}_26=_26||false;url=url||window.location.toString();return {data:_8(url,_26),attr:function(_27){_27=_5[_27]||_27;return typeof _27!=="undefined"?this.data.attr[_27]:this.data.attr;},param:function(_28){return typeof _28!=="undefined"?this.data.param.query[_28]:this.data.param.query;},fparam:function(_29){return typeof _29!=="undefined"?this.data.param.fragment[_29]:this.data.param.fragment;},segment:function(seg){if(typeof seg==="undefined"){return this.data.seg.path;}else{seg=seg<0?this.data.seg.path.length+seg:seg-1;return this.data.seg.path[seg];}},fsegment:function(seg){if(typeof seg==="undefined"){return this.data.seg.fragment;}else{seg=seg<0?this.data.seg.fragment.length+seg:seg-1;return this.data.seg.fragment[seg];}}};};_2.purl=_25;}(msos));msos.parse_query=function(){"use strict";var url=msos.purl(),key="",cfg="",_2a=url.param();for(key in _2a){if(_2a[key]==="true"){_2a[key]=true;}if(_2a[key]==="false"){_2a[key]=false;}}for(cfg in msos.config){if(_2a[cfg]||_2a[cfg]===false){msos.config[cfg]=_2a[cfg];}}if(msos.config.verbose){msos.config.debug=true;}return _2a;};msos.config.query=msos.parse_query();Object.keys(msos.config.size_wide).map(function(k){return [k,msos.config.size_wide[k]];}).sort(function(a,b){if(a[1]<b[1]){return -1;}if(a[1]>b[1]){return 1;}return 0;}).forEach(function(d){msos.config.size_array.push(d[0]);});msos.console=(function(){"use strict";var _2b={queue:[]},_2c=window.console,idx=msos.log_methods.length-1,aps=Array.prototype.slice;function _2d(arg){if(arg instanceof Error){if(arg.stack){arg=(arg.message&&arg.stack.indexOf(arg.message)===-1)?"Error: "+arg.message+"\n"+arg.stack:arg.stack;}else{if(arg.sourceURL){arg=arg.message+"\n"+arg.sourceURL+":"+arg.line;}}}return arg;};while(idx>=0){(function(_2e){_2b[_2e]=function(){var cfg=msos.config,_2f=cfg.query.debug_filter||"",i=0;if(_2e==="debug"&&!cfg.debug){return;}var _30=aps.apply(arguments),_31=_30[0]?_30[0].replace(/\W/g,"_"):"missing_args",_32=_2c[_2e]||_2c.log,_33=[],_34=[];if(_2e==="debug"&&cfg.verbose&&_2f&&/^[0-9a-zA-Z.]+$/.test(_2f)){_2f=new RegExp("^"+_2f.replace(".","."));if(!_31.match(_2f)){return;}}if(_2e==="time"||_2e==="timeEnd"){msos.record_times[_31+"_"+_2e]=(new Date()).getTime();}if(cfg.console){_33=[_2e].concat(_30);if(_2e==="time"||_2e==="timeEnd"){_33.push(msos.record_times[_31+"_"+_2e]);}_2b.queue.push(_33);}if(_2c){if(_32.apply){for(i=0;i<_30.length;i+=1){_34.push(_2d(_30[i]));}_32.apply(_2c,_34);}else{var _35=_30.join(" ");_32(_35);}}};}(msos.log_methods[idx]));idx-=1;}return _2b;}());msos.console.time("base");msos.console.info("msos/base -> start.");msos.var_is_null=function(_36){"use strict";if(_36===undefined){return true;}if(_36===null){return true;}return false;};msos.var_is_empty=function(_37){"use strict";if(msos.var_is_null(_37)){return true;}if(_37===""){return true;}return false;};msos.do_nothing=function(evt){"use strict";evt.preventDefault();evt.stopPropagation();};msos.do_abs_nothing=function(evt){"use strict";evt.preventDefault();evt.stopImmediatePropagation();};msos.new_time=function(){"use strict";return (new Date()).getTime();};msos.set_version=function(mjr,mnr,pth){"use strict";var _38=this;_38={major:mjr,minor:mnr,patch:pth,toString:function(){return "v"+_38.major+"."+_38.minor+"."+_38.patch;}};return _38;};msos.gen_namespace=function(b){"use strict";var a=window,c=0;b=b.split(".");for(c=0;c<b.length;c+=1){a=a[b[c]]||(a[b[c]]={});}return a;};msos.generate_url_name=function(url){"use strict";var _39,_3a=[],_3b="";_39=msos.purl(url).attr("path");_3a=_39.split("/");_3b=_3a.slice(2).join(":");_3b=_3b.replace(/[^0-9a-zA-Z]/g,"_");return _3b;};msos.run_function_array=function(_3c){"use strict";var _3d="msos.run_func_array -> ",m=0;_3c=_3c||"missing";msos.console.debug(_3d+"start: "+_3c);if(!msos[_3c]||!(_.isArray(msos[_3c]))){msos.console.error(_3d+"for: "+_3c+", failed.");return;}for(m=0;m<msos[_3c].length;m+=1){msos.console.debug(_3d+"index: "+m);try{msos[_3c][m]();}catch(e){msos.console.error(_3d+"for: "+_3c,e);}}msos[_3c]=[];msos.console.debug(_3d+"done: "+_3c);};msos.get_js_base=function(){"use strict";var _3e="msos.get_js_base -> ",_3f,_40,_41;msos.console.debug(_3e+"start.");_3f=document.getElementsByTagName("script");_40=_3f[_3f.length-1];_41=_40.src;_41=_41.slice(0,_41.lastIndexOf("/")+1)||"";if(!_41){throw new Error(_3e+"failed!");}msos.console.debug(_3e+"done, uri: "+_41);return _41;};msos.base_script_url=msos.get_js_base();msos.resource_url=function(_42,_43){"use strict";return msos.base_script_url.replace(/\/msos\//,"/"+_42+"/")+_43;};msos.cookie=function(_44,_45,_46){"use strict";var _47="msos.cookie -> ",_48="",_49=null,_4a="",_4b="",_4c="",_4d="",_4e=[],_4f="",_50="",i=0;if(msos.config.verbose){msos.console.debug(_47+"start, "+(_45?"set":"get")+" for "+_44);}if(_45!==undefined){_46=_46||{expires:90,path:"/"};if(_45===null){_45="";_46.expires=-1;msos.console.debug(_47+"delete: "+_44);}if(_46.expires&&(typeof _46.expires==="number"||_46.expires.toUTCString)){if(typeof _46.expires==="number"){_49=new Date();_49.setTime(_49.getTime()+(_46.expires*86400000));}else{_49=_46.expires;}_48="; expires="+_49.toUTCString();}_4a=_46.path?"; path="+(_46.path):"; path=/";_4b=_46.domain?"; domain="+(_46.domain):"";_4c=_46.secure?"; secure":"";_4d=[_44,"=",encodeURIComponent(_45),_48,_4a,_4b,_4c].join("");document.cookie=_4d;if(msos.config.verbose){msos.console.debug(_47+"done, set: "+_4d);}return true;}_50="";if(document.cookie&&document.cookie!==""){_4e=document.cookie.split(";");for(i=0;i<_4e.length;i+=1){_4f=_4e[i];_4f=_4f.replace(/^\s+|\s+$/g,"");if(_4f.substring(0,_44.length+1)===(_44+"=")){_50=decodeURIComponent(_4f.substring(_44.length+1));break;}}}if(msos.config.verbose){msos.console.debug(_47+"done, get: "+(_50||"na"));}return _50;};msos.clear_cookies=function(){"use strict";var _51="msos.clear_cookies -> ",idx=0,_52=["site_pref","site_i18n","site_cart","site_cltl","site_bdwd"],_53;msos.console.debug(_51+"start.");for(idx=0;idx<_52.length;idx+=1){_53=msos.config.cookie[_52[idx]]||0;if(_53){msos.cookie(_53.name,null);}}msos.console.debug(_51+"done!");};if(msos.config.clear_cookies){msos.clear_cookies();}msos.set_locale=function(){"use strict";var _54="msos.set_locale -> ",cfg=msos.config,_55=cfg.cookie.site_i18n,_56=[];if(_55.value){_56=_55.value.split(":");}msos.console.debug(_54+"start, cookie: "+(_55.value||"na"));cfg.locale=cfg.query.locale||_56[0]||cfg.locale||msos.default_locale;cfg.culture=cfg.query.culture||_56[1]||cfg.culture||cfg.locale;cfg.calendar=cfg.query.calendar||_56[2]||cfg.calendar;msos.console.debug(_54+"done, locale: "+cfg.locale+", culture: "+cfg.culture+", calendar: "+cfg.calendar);};msos.set_locale_cookie=function(){"use strict";var _57="msos.set_locale_cookie -> ",_58=msos.config.cookie.site_i18n;msos.console.debug(_57+"start.");_58.value=msos.config.locale+":"+msos.config.culture+":"+msos.config.calendar;msos.cookie(_58.name,_58.value,_58.params);msos.console.debug(_57+"done, value: "+_58.value);_58.set=true;};msos.get_viewport=function(_59){"use strict";var d=_59.document,dd=d.documentElement,b=d.body||d.getElementsByTagName("body")[0],_5a={width:0,height:0},_5b="msos.get_viewport -> ";if(_59.innerWidth!==undefined){_5a.width=_59.innerWidth;_5a.height=_59.innerHeight;_5b+="innerWidth/Height spec";}else{if(dd&&dd.clientWidth){_5a.width=dd.clientWidth;_5a.height=dd.clientHeight;_5b+="documentElement.clientWidth/Height spec";}else{if(b&&b.clientWidth){_5a.width=b.clientWidth;_5a.height=b.clientHeight;_5b+="body.clientWidth/Height spec";}else{if(window!==_59){_5b+="failed for (popup window), this";}else{_5b+="failed for this";}}}}if(window===_59){msos.config.view_port=_5a;}msos.console.debug(_5b+" browser.");return _5a;};msos.browser_orientation=function(){"use strict";var _5c=msos.config.view_orientation,_5d=msos.get_viewport(window),_5e="msos.browser_orientation -> ";if(window.orientation!==undefined){switch(window.orientation){case 0:_5c.layout="portrait";_5c.direction="normal";_5c.numeric=0;break;case -90:_5c.layout="landscape";_5c.direction="right";_5c.numeric=-90;break;case 90:_5c.layout="landscape";_5c.direction="left";_5c.numeric=90;break;case 180:_5c.layout="portrait";_5c.direction="flipped";_5c.numeric=180;break;default:_5c.layout=_5d.width/_5d.height<1.1?"portrait":"landscape";_5c.direction="normal";_5c.numeric=_5d.width/_5d.height<1.1?0:90;}_5c.method="window.orientation("+window.orientation+")";}else{_5c.layout=_5d.width/_5d.height<1.1?"portrait":"landscape";_5c.direction="normal";_5c.method="document.documentElement";_5c.numeric=_5d.width/_5d.height<1.1?0:90;}msos.console.debug(_5e+"layout: "+_5c.layout+", dir: "+_5c.direction+" for "+_5c.method);return _5c;};msos.browser_current=function(){"use strict";var _5f="msos.browser_current -> ",_60=[];if(!window.focus){_60.push("window.focus");}if(!document.images){_60.push("document.images");}if(!document.styleSheets){_60.push("document.styleSheets");}if(!document.open){_60.push("document.open");}if(!document.close){_60.push("document.close");}if(!window.document.write){_60.push("document.write");}if(!document.addEventListener){_60.push("document.addEventListener");}if(_60.length===0){msos.console.debug(_5f+"browser is current");msos.config.browser.current=true;return;}msos.console.warn(_5f+"browser does not support: "+_60.join(", ")+" -> for doctype "+msos.config.doctype);if(msos.config.doctype==="xhtml5"&&_60[2]==="document.write"){msos.config.browser.current=true;return;}msos.console.error(_5f+"browser is not current");msos.config.browser.current=false;};msos.browser_touch=function(){"use strict";var _61="msos.browser_touch -> ",_62="",_63=document.createElement("div"),_64=0;for(_62 in msos.config.touch){if(msos.config.touch[_62]===true){_64+=1;}else{_64-=1;}}try{document.createEvent("TouchEvent");_64+=1;}catch(e){_64-=1;}if("ontouchstart" in _63){_64+=1;}else{_63.setAttribute("ontouchstart","return;");_64+=(typeof _63.ontouchstart==="function")?1:-1;}_63=null;if(_64>0){msos.config.browser.touch=true;}msos.console.debug(_61+"touch is "+(msos.config.browser.touch?"":"not")+" available, ref. ("+String(_64)+")");};msos.browser_mobile=function(){"use strict";var _65="msos.browser_mobile -> ",_66="",_67=0,_68=[];if(!msos.var_is_empty(screen.height)&&!msos.var_is_empty(screen.width)){_67=(screen.height>screen.width)?screen.height:screen.width;}if(_67&&_67<481){_68.push("screen");}if(msos.config.browser.touch){_68.push("touch");}if(msos.config.orientation){_68.push("orientation");}if(msos.config.orientation_change){_68.push("orientation_change");}if(msos.config.pixel_ratio>1){_68.push("pixel_ratio");}if(_68.length>2){msos.config.browser.mobile=true;msos.config.mobile=true;}msos.console.debug(_65+"browser is "+(msos.config.browser.mobile?"mobile":"not mobile")+(_68.length>0?", flag(s): "+_68.join(", "):""));if(msos.config.query.mobile===true||msos.config.query.mobile===false){if(msos.config.browser.mobile!==msos.config.query.mobile){msos.console.debug(_65+"force mobile setting: "+msos.config.query.mobile);}msos.config.mobile=msos.config.query.mobile?true:false;}};msos.browser_advanced=function(){"use strict";var _69="msos.browser_advanced -> ",_6a=document.createElement("body"),_6b=_6a.style,_6c=[],_6d=["Webkit","Moz","O","ms","Khtml"],_6e=null,_6f=null;_6e=function(_70){var _71=_70.charAt(0).toUpperCase()+_70.substr(1),_72=(_70+" "+_6d.join(_71+" ")+_71).split(" "),v="";for(v in _72){if(_6b[v]!==undefined){return true;}}_6c.push(_70);return false;};msos.config.css_pseudoelement=(!!_6e("content"));msos.config.boxshadow=(!!_6e("boxShadow")&&!window.blackberry);msos.config.transform=(!!_6e("Transform"));_6f=function(){var i=0;for(i=0;i<_6d.length;i+=1){if(window[_6d[i]+"WebSocket"]){return true;}}return ("WebSocket" in window);};msos.config.websocket=_6f();if(!msos.config.scrolltop){_6c.push("scrollTop");}_6a=null;if(_6c[0]){msos.console.debug(_69+"browser is not advanced, missing: "+_6c.join(" "));msos.config.browser.advanced=false;return false;}msos.console.debug(_69+"browser is advanced.");msos.config.browser.advanced=true;return true;};msos.browser_editable=function(){"use strict";if(!(document.designMode||msos.body.contentEditable)){msos.config.browser.editable=false;return;}if(document.execCommand===undefined){msos.config.browser.editable=false;return;}msos.console.debug("msos.browser_editable -> browser supports content editing");msos.config.browser.editable=true;};msos.browser_direction=function(){"use strict";var _73="",_74=null;_74=function(){var _75=document.createElement("p"),_76=document.createElement("span"),_77="";_75.style.margin="0 0 0 0";_75.style.padding="0 0 0 0";_75.style.textAlign="";_76.innerHTML="X";_75.appendChild(_76);document.body.appendChild(_75);_77=_76.offsetLeft<(_75.offsetWidth-(_76.offsetLeft+_76.offsetWidth))?"ltr":"rtl";msos.body.removeChild(_75);if(msos.config.verbose){msos.console.debug("msos.browser_direction -> by build_test: "+_77);}return _77;};_73=(msos.body.dir||document.documentElement.dir||_74()||"ltr").toLowerCase();msos.config.browser.direction=_73;};msos.browser_preloading=function(){"use strict";var _78=msos.config.script_preload,_79=document.createElement("script"),dua=navigator.userAgent;_78.async="async" in _79?true:false;_78.defer="defer" in _79?true:false;_78.explicit=typeof _79.preload==="boolean"?true:false;_78.available=_78.explicit?true:(_79.readyState&&_79.readyState==="uninitialized")?true:false;_78.ordered=(!_78.available&&_79.async===true)?true:false;_78.xhr_cache=(_78.available||(!_78.ordered&&!(dua.indexOf("Opera")!==-1)&&!(dua.indexOf("Gecko")!==-1)))?true:false;_79=null;};msos.get_head=function(win){"use strict";var d=win.document,de=d.documentElement,hd=d.head||d.getElementsByTagName("head")[0];if(!hd){hd=d.createElement("head");de.insertBefore(hd,de.firstChild);}return hd;};msos.create_node=function(tag,_7a,win){"use strict";if(!win){win=window;}var _7b=win.document.createElement(tag),at="";if(msos.config.verbose){msos.console.debug("msos.create_node -> called for: "+tag,_7a);}for(at in _7a){_7b.setAttribute(at,_7a[at]);}return _7b;};msos.loader=function(win){"use strict";var _7c="msos.loader",_7d=this,_7e=msos.purl().attr("file"),i=0;if(!win){win=window;}if(!win.msos){win.msos={};}if(!win.name){win.name=_7e.replace(/[^0-9a-zA-Z]/g,"_")||"base_win";}if(!win.msos.registered_files){win.msos.registered_files={js:{},css:{},ico:{},ajax:{}};}msos.console.debug(_7c+" -> start for window: "+win.name);this.doc_head=msos.get_head(win);this.toggle_css=[];this.delay_css=0;this.deferred_array=[];this.deferred_done=true;this.add_resource_onload=[];this.load=function(_7f,url,_80,_81){var _82=url.split("?")[0],ext=_82.substr(_82.lastIndexOf(".")+1),_83=/^js|css|ico$/,lo=" - load -> ",_84=null;if(msos.config.verbose){msos.console.debug(_7c+lo+"start.");}_81=_81||{};if(!_80){_80=ext||"na";}if(!_83.test(_80)){msos.console.error(_7c+lo+"missing or invalid: "+_80);return;}if(_7d.check(_7f,url,_80)){msos.console.debug(_7c+lo+"already loaded: "+_7f+", url: "+url);}else{_84=function(){_7d.resource(_7f,url,_80,_81);};if(_81.defer&&_81.defer==="defer"){if(msos.config.script_preload.ordered){_84();msos.console.debug(_7c+lo+"browser deferred file: "+url);}else{if(_7d.deferred_done===true){_7d.deferred_done=false;_84();}else{_7d.deferred_array.push(_84);}msos.console.debug(_7c+lo+"deferred file: "+url+", queue: "+_7d.deferred_array.length);}}else{if(_80==="css"){setTimeout(_84,_7d.delay_css);_7d.delay_css+=5;msos.console.debug(_7c+lo+"css file: "+url+", delay: "+_7d.delay_css);}else{_84();msos.console.debug(_7c+lo+"file: "+url);}}}if(msos.config.verbose){msos.console.debug(_7c+lo+"done!");}};this.check=function(_85,_86,_87){var _88=_7d.toggle_css,_89=false,ld=" - check -> ";msos.console.debug(_7c+ld+"start.");if(win.msos.registered_files[_87]&&win.msos.registered_files[_87][_85]){_89=true;}if(_87==="css"&&_88.length>0){for(i=0;i<_88.length;i+=1){if(win.msos.registered_files.css[_88[i]]){win.msos.registered_files.css[_88[i]].disabled=true;}}if(win.msos.registered_files.css[_85]){win.msos.registered_files.css[_85].disabled=false;msos.console.debug(_7c+ld+"set active: "+_86);}for(i=0;i<_7d.add_resource_onload.length;i+=1){_7d.add_resource_onload[i]();}}msos.console.debug(_7c+ld+"done, already loaded (t/f): "+(_89?"true":"false")+" for "+_85);return _89;};this.init_create_node=function(_8a,url,_8b,_8c){var _8d=null,icn=" - init_create_node -> ",_8e={},ats="";if(msos.config.verbose){msos.console.debug(_7c+icn+"start.");}if(msos.config.cache===false){url+=((/\?.*$/.test(url)?"&_":"?_")+~~(Math.random()*1000000000)+"=");}if(_8b==="js"){_8e={id:_8a,type:"text/javascript",src:url,charset:"utf-8"};}else{if(_8b==="css"){_8e={id:_8a,type:"text/css",rel:"stylesheet",href:url,media:"all"};}else{if(_8b==="ico"){_8e={id:_8a,type:"image/x-icon",rel:"shortcut icon",href:url};}}}if(_8c!==undefined&&typeof _8c==="object"){for(ats in _8c){_8e[ats]=_8c[ats];}}if(_8b==="js"){_8d=msos.create_node("script",_8e,win);if(_8c.defer==="defer"){_8d.async=false;}else{_8d.async=true;}}else{if(_8b==="css"){_8d=msos.create_node("link",_8e,win);}else{if(_8b==="ico"){_8d=msos.create_node("link",_8e,win);}}}_8d.msos_load_state="loading";if(_8b==="js"&&msos.config.script_onerror){_8d.onerror=function(e){msos.console.error(_7c+" -> failed for: "+_8a,e);};}if(msos.config.verbose){msos.console.debug(_7c+icn+"done!");}return _8d;};this.resource=function(_8f,_90,_91,_92){var _93=_7d.init_create_node(_8f,_90,_91,_92)||null,ls=" - resource -> ",_94=function(){var i=0,_95;if(this.msos_load_state!=="loaded"&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"||this.readyState==="uninitialized")){if(msos.config.verbose){msos.console.debug(_7c+ls+"loaded, name: "+this.id);}this.msos_load_state="loaded";for(i=0;i<_7d.add_resource_onload.length;i+=1){_7d.add_resource_onload[i]();}if(this.getAttribute("defer")==="defer"){if(_7d.deferred_array.length){_95=_7d.deferred_array.shift();_95();}else{_7d.deferred_done=true;}}this.onload=this.onreadystatechange=null;}return true;};msos.console.debug(_7c+ls+"start, type: "+_91+", name: "+_8f);if(_93!==null){_93.onload=_93.onreadystatechange=_94;_7d.doc_head.appendChild(_93);win.msos.registered_files[_91][_8f]=_93;msos.console.debug(_7c+ls+"done!");}};msos.console.debug(_7c+" -> done!");};msos.dom_tracking=function(_96){"use strict";var _97="msos.dom_tracking";if(msos.dom[_96]){msos.console.error(_97+" -> failed, jQuery.fn."+_96+" already registered.");return;}msos.dom[_96]=[];var _98=jQuery.fn[_96];jQuery.fn[_96]=function(){var _99=_97+" - "+_96,_9a=[];msos.console.debug(_99+" -> start.");jQuery.each(this,function(_9b,_9c){var trk=msos.dom[_96],tag=_9c.tagName,id=_9c.id||"trk_"+tag.toLowerCase()+"_"+(trk.length+1),$el=jQuery(_9c);if(!_9c.id){_9c.id=id;}if(trk.indexOf(id)===-1){trk.push(id);_9a.push(_9c);$el.data(id,true);if(msos.config.verbose){msos.console.debug(_99+" -> skipped: "+id);}}else{if($el.data(id)!==true){_9a.push(_9c);$el.data(id,true);msos.console.debug(_99+" -> new instance: "+id);}}});msos.console.debug(_99+" -> done!");return (_98.apply(jQuery(_9a),arguments));};};msos.set_environment=function(){"use strict";var _9d="msos.set_environment -> ",_9e=msos.config.cookie;msos.console.debug(_9d+"start");_9e.site_pref.value=msos.cookie(_9e.site_pref.name);_9e.site_i18n.value=msos.cookie(_9e.site_i18n.name);_9e.site_bdwd.value=msos.cookie(_9e.site_bdwd.name);msos.browser_current();msos.browser_advanced();msos.browser_editable();msos.browser_orientation();msos.browser_touch();msos.browser_mobile();msos.browser_preloading();if(msos.config.verbose){msos.console.debug(_9d+"done, browser env: ",msos.config.browser);}else{msos.console.debug(_9d+"done!");}};msos.calc_display_size=function(){"use strict";var _9f="",_a0=msos.config.view_port,_a1=0,_a2=0,_a3=0,_a4="",_a5=0;if(!msos.var_is_empty(_a0.width)&&_a0.width!==0){_a1=_a0.width;}if(!msos.var_is_empty(screen.width)&&screen.width!==0){_a2=screen.width;}_a3=_a1||_a2;for(_a4 in msos.config.size_wide){_a5=msos.config.size_wide[_a4]-(msos.config.size_wide[_a4]*0.03);if(_a3>_a5){if(_9f){if(msos.config.size_wide[_9f]<msos.config.size_wide[_a4]){_9f=_a4;}}else{_9f=_a4;}}}msos.console.debug("msos.calc_display_size -> calculated: "+_9f+", viewport w: "+_a0.width+", screen w: "+screen.width);return _9f;};msos.get_display_size=function(){"use strict";var _a6="msos.get_display_size -> ",_a7=msos.config.cookie.site_pref.value,_a8=msos.config.view_orientation.layout,_a9=[],_aa="";msos.console.debug(_a6+"start.");if(_a7){_a9=_a7.split(":");if(_a8==="portrait"){_aa=_a9[0]||"";}else{_aa=_a9[1]||"";}msos.console.debug(_a6+"cookie detected: "+_a7);}else{_a9[0]="unknown";_a9[1]="unknown";}_a9[2]=_a8;if(_aa==="unknown"){_aa="";}msos.config.size=msos.config.query.size||_aa||msos.calc_display_size()||msos.config.size;if(msos.config.query.size){msos.console.info(_a6+"size set by input!");}if(_a8==="portrait"){_a9[0]=msos.config.size;}else{_a9[1]=msos.config.size;}_a7=_a9.join(":");msos.config.cookie.site_pref.value=_a7;msos.console.debug(_a6+"done: "+msos.config.size+", for "+_a8);};msos.css_loader=function(_ab,win){"use strict";var _ac="msos.css_loader -> ",_ad=null,_ae="",_af="",i=0;msos.console.debug(_ac+"start.");_ad=new msos.loader(win);for(i=0;i<_ab.length;i+=1){_af=_ab[i];_ae=msos.generate_url_name(_af);_ad.load(_ae,_af,"css");}msos.console.debug(_ac+"done!");};msos.script_loader=function(_b0){"use strict";var _b1="msos.script_loader -> ",_b2=null,_b3="",_b4="",i=0;msos.console.debug(_b1+"start.");_b2=new msos.loader();for(i=0;i<_b0.length;i+=1){_b4=_b0[i];_b3=msos.generate_url_name(_b4);_b2.load(_b3,_b4,"js",{defer:"defer"});}msos.console.debug(_b1+"done!");};msos.set_environment();msos.set_locale();msos.get_display_size();msos.console.info("msos/base -> done!");msos.console.timeEnd("base");