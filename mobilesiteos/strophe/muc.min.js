Strophe.addConnectionPlugin("muc",{_connection:null,_p_name:"Strophe.Plugin.muc - ",init:function(_1){"use strict";msos.console.debug(this._p_name+"init -> start.");this._connection=_1;Strophe.addNamespace("MUC_OWNER",Strophe.NS.MUC+"#owner");Strophe.addNamespace("MUC_ADMIN",Strophe.NS.MUC+"#admin");msos.console.debug(this._p_name+"init -> done!");},join:function(_2,_3,_4,_5,_6){"use strict";msos.console.debug(this._p_name+"join -> start.");var _7=this.test_append_nick(_2,_3),_8,_9;_8=$pres({from:this._connection.jid,to:_7}).c("x",{xmlns:Strophe.NS.MUC});if(_6){_9=Strophe.xmlElement("password",[],_6);_8.cnode(_9);}if(_4){this._connection.addHandler(function(_a){var _b=_a.getAttribute("from"),_c=_b.split("/");msos.console.debug(this._p_name+"join -> done, msg callback.");if(_c[0]===_2){return _4(_a);}return true;},null,"message",null,null,null);}if(_5){this._connection.addHandler(function(_d){var _e=_d.getElementsByTagName("x"),i=0,_f;if(_e.length>0){for(i=0;i<_e.length;i+=1){_f=_e[i].getAttribute("xmlns");if(_f&&_f.match(Strophe.NS.MUC)){msos.console.debug(this._p_name+"join -> done, pres callback.");return _5(_d);}}}return true;},null,"presence",null,null,null);}this._connection.send(_8);msos.console.debug(this._p_name+"join -> done!");},leave:function(_10,_11,_12){"use strict";msos.console.debug(this._p_name+"leave -> start.");var _13=this.test_append_nick(_10,_11),_14=this._connection.getUniqueId(),_15=$pres({type:"unavailable",id:_14,from:this._connection.jid,to:_13}).c("x",{xmlns:Strophe.NS.MUC});this._connection.addHandler(_12,null,"presence",null,_14,null);this._connection.send(_15);msos.console.debug(this._p_name+"leave -> done!");return _14;},message:function(_16,_17,_18,_19){"use strict";msos.console.debug(this._p_name+"message -> start.");var _1a=this.test_append_nick(_16,_17),_1b=this._connection.getUniqueId(),msg;_19=_19||"groupchat";msg=$msg({to:_1a,from:this._connection.jid,type:_19,id:_1b}).c("body",{xmlns:Strophe.NS.CLIENT}).t(_18);msg.up().c("x",{xmlns:"jabber:x:event"}).c("composing");this._connection.send(msg);msos.console.debug(this._p_name+"message -> done!");return _1b;},configure:function(_1c){"use strict";msos.console.debug(this._p_name+"configure -> called.");var _1d=$iq({to:_1c,type:"get"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}),_1e=_1d.tree();return this._connection.sendIQ(_1e,function(){},function(){});},cancelConfigure:function(_1f){"use strict";msos.console.debug(this._p_name+"cancelConfigure -> called.");var _20=$iq({to:_1f,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),_21=_20.tree();return this._connection.sendIQ(_21,function(){},function(){});},saveConfiguration:function(_22,_23){"use strict";msos.console.debug(this._p_name+"saveConfiguration -> called.");var _24=$iq({to:_22,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),i=0,_25;for(i=0;i<_23.length;i+=1){_24.cnode(_23[i]);_24.up();}_25=_24.tree();return this._connection.sendIQ(_25,function(){},function(){});},createInstantRoom:function(_26){"use strict";msos.console.debug(this._p_name+"createInstantRoom -> called.");var _27=$iq({to:_26,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"});return this._connection.sendIQ(_27.tree(),function(){},function(){});},setTopic:function(_28,_29){"use strict";msos.console.debug(this._p_name+"setTopic -> called.");var msg=$msg({to:_28,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(_29);this._connection.send(msg.tree());},modifyUser:function(_2a,_2b,_2c,_2d,_2e){"use strict";msos.console.debug(this._p_name+"modifyUser -> called.");var _2f={nick:Strophe.escapeNode(_2b)},_30,_31;if(_2c!==null){_2f.role=_2c;}if(_2d!==null){_2f.affiliation=_2d;}_30=$build("item",_2f);if(_2e!==null){_30.cnode(Strophe.xmlElement("reason",_2e));}_31=$iq({to:_2a,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).cnode(_30.tree());return this._connection.sendIQ(_31.tree(),function(){},function(){});},changeNick:function(_32,_33){"use strict";msos.console.debug(this._p_name+"changeNick -> called.");var _34=this.test_append_nick(_32,_33),_35=$pres({from:this._connection.jid,to:_34}).c("x",{xmlns:Strophe.NS.MUC});this._connection.send(_35.tree());},listRooms:function(_36,_37){"use strict";msos.console.debug(this._p_name+"listRooms -> called.");var iq=$iq({to:_36,from:this._connection.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS});this._connection.sendIQ(iq,_37,function(){});},test_append_nick:function(_38,_39){"use strict";var _3a=_38;msos.console.debug(this._p_name+"test_append_nick -> called.");if(_39){_3a+="/"+Strophe.escapeNode(_39);}return _3a;}});