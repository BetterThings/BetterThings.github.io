(function(_1,_2,$){"use strict";var _3="VisualEvent",_4="VisualEvent.parser - DOM 0, 3 -> ",_5="VisualEvent.parser - jQuery v1.9+ -> ";_1.VisualEvent=function(_6){this.parsers=[];this.instance=this;this.parsers.push(function(_7){var _8=[],_9={},_a=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","change","focus","blur","scroll","select","submit","keydown","keypress","keyup","load","unload"],_b,_c="",_d="",i,j;msos.console.debug(_4+"start, dom array length: "+_7.length);for(i=0;i<_7.length;i+=1){_b=_7[i];_c=_b.tagName||"document";_d=_c+"_"+i;_9[_d]=[];if(msos.config.verbose){msos.console.debug(_4+"process: "+_c.toLowerCase()+(_b.id?"#"+_b.id:""));}for(j=0;j<_a.length;j+=1){if(typeof _b["on"+_a[j]]==="function"){_9[_d].push({"type":_a[j],"func":_b["on"+_a[j]].toString(),"removed":false,"source":"DOM 0 event"});}}if(_9[_d].length){_8.push({"node":_b,"listeners":_9[_d]});if(msos.config.verbose){msos.console.debug(_4+"DOM 0 assigned events: "+_c.toLowerCase()+(_b.id?"#"+_b.id:"")+", types:",_8[_8.length-1].listeners);}}if(_b.recorded_addEventListener&&_b.recorded_addEventListener.length){_8.push({"node":_b,"listeners":_b.recorded_addEventListener});if(msos.config.verbose){msos.console.debug(_4+"DOM 3 assigned events: "+_c.toLowerCase()+(_b.id?"#"+_b.id:"")+", types:",_8[_8.length-1].listeners);}}}msos.console.debug(_4+"done, w/ events count: "+_8.length+", for total: "+_7.length);return _8;});this.parsers.push(function(_e){var _f=$.fn.jquery.substr(0,3)||0,_10=[];msos.console.debug(_5+"start.");_f=Number(_f);if(!$||_f<1.9){msos.console.warn(_5+"done, na for jQuery v"+_f);return [];}$.each(_e,function(i,_11){var _12=_11.tagName||"document",_13="",j="",k=0,_14=null,_15,_16,_17=[],_18="jQuery v"+$.fn.jquery;if(msos.config.verbose){msos.console.debug(_5+"process: "+_12.toLowerCase()+(_11.id?"#"+_11.id:""));}if(typeof _11==="object"){if(typeof _11.events==="object"){_15=_11.events;}if(!_15){_15=$._data(_11,"events");}for(_13 in _15){if(_15.hasOwnProperty(_13)){if(_13==="live"){continue;}_16=_15[_13];for(j in _16){if(_16.hasOwnProperty(j)){_17=[];if(_16[j].selector!==undefined&&_16[j].selector!==null){_17=$(_16[j].selector,_11);_18+=" (live event)";}else{_17.push(_11);}for(k=0;k<_17.length;k+=1){_10.push({"node":_17[k],"listeners":[]});if(_16[j].origHandler!==undefined){_14=_16[j].origHandler.toString();}else{if(_16[j].handler!==undefined){_14=_16[j].handler.toString();}else{_14=_16[j].toString();}}if(_16[j]&&_16[j].namespace!=="VisualEvent"&&_14!=="0"){_10[_10.length-1].listeners.push({"type":_13,"func":_14,"removed":false,"source":_18});}}}if(_10[_10.length-1].listeners.length===0){_10.splice(_10.length-1,1);}}}}if(msos.config.verbose){msos.console.debug(_5+"jQuery assigned events, "+_12.toLowerCase()+(_11.id?"#"+_11.id:""),_10[_10.length-1].listeners);}}});msos.console.debug(_5+"done, w/ events count: "+_10.length+", for total: "+_e.length);return _10;});this.s={"elements":null,"mouseTimer":null,"nonDomEvents":0,"scripts":[]};this.ignore=["Event_Label","Event_Display","Event_Lightbox","Event_code","Event_Help","google_ad","social_ties","google_translate_element","goog-gt-tt"];this.targetable_ids={};this.dom={"label":$("<div id=\"Event_Label\" class=\""+msos.config.size+"\">"+"<select id=\"Event_Target\"></select> "+"<span class=\"btn btn-danger Event_LabelClose\"><i class=\"fa fa-times\"></i></span> "+"<span class=\"btn btn-info   Event_LabelHelp\"><i class=\"fa fa-info\"></i></span> "+"<ul>"+"<li><span class=\"Event_LabelEvents\"></span> events, attached to <span class=\"Event_LabelNodes\"></span> nodes.</li>"+"<li><span class=\"Event_LabelNonDom\"></span> events for elements not in the document yet.</li>"+"</ul>"+"</div>")[0],"display":$("<div id=\"Event_Display\"></div>")[0],"lightbox":$("<div id=\"Event_Lightbox\" class=\""+msos.config.size+"\">"+"<div class=\"Event_NodeName\">Node: <i></i>"+"<div class=\"Event_NodeRemove\">Remove from display</div>"+"</div>"+"<div>"+"<div class=\"Event_Nav\"><ul></ul></div>"+"</div>"+"<div class=\"Event_Code\"></div>"+"</div>"+"</div>")[0],"help":$("<div id=\"Event_Help\" class=\""+msos.config.size+"\">"+"<div class=\"Event_HelpInner\">"+"<h1>Visual Event help</h1>"+"<p>Visual Event will show which elements on any given page have Javascript events attached, "+"what those events are and the code associated with the events."+"</p>"+"<h3>Commands</h3>"+"<table class=\"table\">"+"<tr>"+"<td>Double click</td>"+"<td>Hide this event indicator</td>"+"</tr><tr>"+"<td class=\"text_rt\">Key: space</td>"+"<td>Restore all event indicators</td>"+"</tr><tr>"+"<td>Key: esc</td>"+"<td>Quit Visual Event</td>"+"</tr><tr>"+"<td>Key: h</td>"+"<td>Toggle this help box</td>"+"</tr><tr>"+"<td>Key: r</td>"+"<td>Reload and display events</td>"+"</tr>"+"</table>"+"<h3>Event Coding</h3>"+"<p>Colour coding of detected event elements vs. the basic event type:</p>"+"<table class=\"table\">"+"<tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_blue\"></div></td><td>Mouse event</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_red\"></div></td><td>UI event</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_yellow\"></div></td><td>HTML event</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_green\"></div></td><td>Mouse + HTML</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_purple\"></div></td><td>Mouse + UI</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_orange\"></div></td><td>HTML + UI</td>"+"</tr><tr>"+"<td width=\"20%\"><div class=\"EventLabel Event_LabelColour Event_bg_black\"></div></td><td>Mouse + HTML + UI</td>"+"</tr>"+"</table>"+"<p>Visual Event is open source software (GPLv2). If you would like to contribute an "+"enhancement, please fork the project on "+"<a href=\"https://github.com/DataTables/VisualEvent\" target=\"_blank\">Github</a>!</p>"+"<p class=\"Event_HelpClose\">Click anywhere to close this help box.</p>"+"</div>"+"</div>")[0],"activeEventNode":null};this._construct(_6);};VisualEvent.prototype={"close":function(){$(".EventLabel").remove();$("#Event_Display").remove();$("#Event_Lightbox").remove();$("#Event_Label").remove();$("#Event_Help").remove();VisualEvent.instance=null;},"reInit":function(_19){var _1a=this;$("#Event_Target").empty();$(".EventLabel").remove();$("#Event_Display").remove();$("#Event_Lightbox").remove();$("#Event_Label").remove();$("#Event_Help").remove();this.s.elements=null;this.s.nonDomEvents=0;setTimeout(function(){_1a._construct($("#"+_19)[0]);},1000);},"_construct":function(_1b){var _1c=this,i,_1d,_1e=$(_2).height(),_1f=$(_2).width(),_20=[],_21="",_22=null;msos.console.debug(_3+" - _construct -> start.");this.dom.display.style.width=_1f+"px";this.dom.display.style.height=_1e+"px";_2.body.appendChild(this.dom.display);_2.body.appendChild(this.dom.lightbox);_2.body.appendChild(this.dom.label);$(this.dom.lightbox).bind("mouseover.VisualEvent",function(e){_1c._timerClear(e);}).bind("mousemove.VisualEvent",function(e){_1c._timerClear(e);}).bind("mouseout.VisualEvent",function(){_1c._lightboxHide();});$("div.Event_NodeRemove",this.dom.lightbox).bind("click.VisualEvent",function(){_1c.dom.activeEventNode.style.display="none";_1c.dom.lightbox.style.display="none";});$(_2).bind("keydown.VisualEvent",function(e){if(e.which===0||e.which===27){_1c.close();}if(e.which===72){if($(_1c.dom.help).filter(":visible").length===0){_1c._help();}else{_1c._hideHelp();}}else{if(e.which===32){$("div.EventLabel").css("display","block");e.preventDefault();}else{if(e.which===82){_1c.reInit();}}}});this.s.elements=this._eventsLoad(_1b);for(i=0,_1d=this.s.elements.length;i<_1d;i+=1){this._eventElement(this.s.elements[i]);}if(msos.config.verbose){msos.console.debug(_3+" - _construct -> available nodes:",_1c.targetable_ids);}_22=$("#Event_Target");$.each(_1c.targetable_ids,function(key,val){_20.push($("<option />",{value:key,text:val}));});_22.append(_20);if(_1b){_21=_1b.id;}else{_21="html_body";}_22.find("option[value='"+_21+"']").attr("selected","selected");_22.on("change",function(){var _23=$("#Event_Target").val();_1c.reInit(_23);});this._renderLabel();this._scriptsLoad();msos.console.debug(_3+" - _construct -> done!");},"_help":function(){_2.body.appendChild(this.dom.help);},"_hideHelp":function(){_2.body.removeChild(this.dom.help);},"_scriptsLoad":function(){if(this.s.scripts.length>0){msos.console.debug(_3+" - _scriptsLoad -> called, already loaded!.");return;}var _24=["visualevent","syntaxhighlighter","xregexp","google","addthis","maps.gstatic"],_25=false,_26=[],_27="",_28=_2.getElementsByTagName("script"),_29=_28.length,uri="",j=0,i=0;for(_27 in msos.registered_files.ajax){uri=msos.registered_files.ajax[_27];_25=false;for(j=0;j<_24.length;j+=1){if(uri.indexOf(_24[j])>0){_25=true;}}if(_25){msos.console.debug(_3+" - _scriptsLoad - excluded: "+uri);}else{_26.push(uri);}}for(i=0;i<_29;i+=1){if(_28[i].src&&_28[i].src!==""){uri=_28[i].src;_25=false;for(j=0;j<_24.length;j+=1){if(uri.indexOf(_24[j])>0){_25=true;}}if(_25){msos.console.debug(_3+" - _scriptsLoad - excluded: "+uri);}else{_26.push(uri);}}else{this.s.scripts.push({"src":"Inline script","code":_28[i].text});}}this._scriptLoadQueue(_26);},"_scriptLoadQueue":function(_2a){if(_2a.length===0){msos.console.warn(_3+" - _scriptLoadQueue -> called, no scripts.");return;}var _2b=this,url=_2a.shift();$.ajax({"dataType":"text","type":"GET","url":url,"success":function(_2c){_2b.s.scripts.push({"src":url,"code":_2c});if(_2a.length){_2b._scriptLoadQueue(_2a);}},"error":function(){msos.console.error(_3+" - _scriptLoadQueue -> failed for: "+url);_2b._scriptLoadQueue(_2a);}});},"_scriptSource":function(_2d){var _2e="",_2f=[],i=0,_30=this.s.scripts.length,a;_2d=$.trim(_2d.replace(/^(function.*?\))/,""));for(i=0;i<_30;i+=1){if(this.s.scripts[i].code.indexOf(_2d)!==-1){a=this.s.scripts[i].code.split(_2d);_2f.push({"src":this.s.scripts[i].src,"line":a[0].split("\n").length});}}if(_2f.length===0){_2e="Function definition could not be found automatically<br/>";}else{if(_2f.length===1){_2e="Function, line "+_2f[0].line+" in <a href=\""+_2f[0].src+"\">"+this._scriptName(_2f[0].src)+"</a><br/>";}else{_2e="Function could originate in multiple locations:<br/>";_30=_2f.length;for(i=0;i<_30;i+=1){_2e+=(i+1)+". line "+_2f[0].line+" in <a href=\""+_2f[0].src+"\">"+this._scriptName(_2f[0].src)+"</a><br/>";}}}if(_2f.length===0){_2e="Function definition could not be found automatically<br/>";}else{if(_2f.length===1){_2e="Function, line "+_2f[0].line+" in ";if(_2f[0].src!="Inline script"){_2e+="<a href=\""+_2f[0].src+"\">"+this._scriptName(_2f[0].src)+"</a><br/>";}else{_2e+=_2f[0].src+"<br/>";}}else{_2e="Function could originate in multiple locations:<br/>";for(i=0;i<_30;i+=1){_2e+=(i+1)+". line "+_2f[i].line+" in <a href=\""+_2f[i].src+"\" target=\"_blank\">"+this._scriptName(_2f[i].src)+"</a><br/>";}}}return _2e;},"_scriptName":function(src){var a=src.split("/");return a[a.length-1];},"_eventsLoad":function(_31){var _32=this,i=0,_33=[],_34=this.parsers,_35,_36=[],_37={html_body:"body"};msos.console.debug(_3+" - _eventsLoad -> start.");function _38(elm){var _39=null;_36.push(elm);if(elm.hasChildNodes()){_39=elm.firstChild;while(_39){if(_39.nodeType===1&&_39.nodeName!="SCRIPT"&&_39.nodeName!="IFRAME"){if(_39.id&&_.indexOf(_32.ignore,_39.id)===-1){_38(_39);_37[_39.id]=_39.tagName.toLowerCase()+"#"+_39.id;}else{if(!_39.id){_38(_39);}}}_39=_39.nextSibling;}}};if(_31){_37[_31.id]=_31.tagName.toLowerCase()+"#"+_31.id;}else{jQuery(_2).each(function(i,_3a){_36.push(_3a);});_31=msos.body;}_38(_31);this.targetable_ids=_37;msos.console.debug(_3+" - _eventsLoad -> dom array length: "+_36.length+", parsers length: "+_34.length);for(i=0;i<_34.length;i+=1){msos.console.debug(_3+" - _eventsLoad -> start parser: "+i);try{_35=_34[i](_36);_33=_33.concat(_35);}catch(e){msos.console.error(_3+" - _eventsLoad -> error: "+e);}}msos.console.debug(_3+" - _eventsLoad -> done!");return _33;},"_eventElement":function(_3b){var _3c=this,pos,_3d,_3e=$(_3b.node);if(msos.var_is_empty(_3b.node)){msos.console.error(_3+" - _eventElement -> missing event node:",_3b);return;}msos.console.debug(_3+" - _eventElement -> start, for: "+(_3e.attr("id")||_3e.attr("class")||_3b.node.nodeName.toLowerCase()));if(_3e.filter(":visible").length===0){this.s.nonDomEvents+=1;return;}pos=_3e.offset();_3d=_2.createElement("div");_3d.style.position="absolute";_3d.style.top=pos.top+"px";_3d.style.left=pos.left+"px";_3d.className="EventLabel Event_bg_"+this._getColorFromTypes(_3b.listeners);if(_3b.node!==_2.body&&_3b.node!==_2.documentElement){_3d.style.width=(_3b.node.offsetWidth-4)+"px";_3d.style.height=(_3b.node.offsetHeight-4)+"px";}$(_3d).bind("dblclick.VisualEvent",function(){this.style.display="none";return false;}).bind("click.VisualEvent",function(e){_3c.dom.activeEventNode=this;_3c._lightboxList(e,_3b.node,_3b.listeners);});this.dom.display.appendChild(_3d);},"_lightboxList":function(e,_3f,_40){var i=0,_41=_40.length,ul;this._timerClear();$("i",this.dom.lightbox).html(this._renderNodeInfo(_3f));$("div.Event_Code",this.dom.lightbox).empty();ul=$("ul",this.dom.lightbox).empty();for(i=0;i<_41;i+=1){ul.append($("<li>"+_40[i].type+"</li>").bind("mouseover.VisualEvent",this._lightboxCode(e,_3f,_40[i])));}$("li:eq(0)",this.dom.lightbox).mouseover();$(this.dom.lightbox).css({display:"block"});},"_lightboxCode":function(e,_42,_43){var _44=this;return function(){$("li",this.parentNode).removeClass("Event_EventSelected");$(this).addClass("Event_EventSelected");var evt=_44._createEvent(e,_43.type,e.target);_44._renderCode(e,_43.func,_43.source,_43.type,evt===null?null:function(){_42.dispatchEvent(evt);setTimeout(function(){var _45=$("#Event_Target").val();_44.reInit(_45);},500);});};},"_lightboxHide":function(){var _46=this;this.s.mouseTimer=setTimeout(function(){_46.dom.lightbox.style.display="none";},200);},"_renderCode":function(e,_47,_48,_49,_4a){var _4b,_4c;this._timerClear(e);if(_4a===null){$("div.Event_Code",this.dom.lightbox).html("<div id=\"Event_inner\">"+"<p><i>"+_49+"</i> subscribed by "+_48+"<br/>"+this._scriptSource(_47)+"</p>"+"<pre id=\"Event_code\" class=\"brush: js\"></pre>"+"</div>");}else{$("div.Event_Code",this.dom.lightbox).html("<div id=\"Event_inner\">"+"<p><i>"+_49+"</i> subscribed by "+_48+" "+"<span id=\"Event_Trigger\" class=\"btn btn-success\">Fire</span><br/>"+this._scriptSource(_47)+"</p>"+"<pre id=\"Event_code\" class=\"brush: js\"></pre>"+"</div>");$("#Event_Trigger").bind("click.VisualEvent",_4a);}_4b=_47.split("\n");if(_4b.length>1){_4c=_4b[_4b.length-1].match(/^(\s*)/g);_4b[0]=_4c+_4b[0];_47=_4b.join("\n");}$("pre",this.dom.lightbox).html(_47.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));SyntaxHighlighter.highlight({"toolbar":false,"quick-code":false},_2.getElementById("Event_code"));},"_renderNodeInfo":function(_4d){var s=_4d.nodeName.toLowerCase(),id=_4d.getAttribute("id"),_4e="";if(id&&id!==""){s+="#"+id;}_4e=_4d.className;if(_4e!==""){s+="."+_4e;}return s;},"_renderLabel":function(){var _4f=this,_50=0,i=0,_51=this.s.elements.length;for(i=0;i<_51;i+=1){_50+=this.s.elements[i].listeners.length;}$("span.Event_LabelEvents",this.dom.label).html(_50);$("span.Event_LabelNodes",this.dom.label).html(this.s.elements.length);$("span.Event_LabelNonDom",this.dom.label).html(this.s.nonDomEvents);$("span.Event_LabelClose",this.dom.label).bind("click.VisualEvent",function(){_4f.close();});$("span.Event_LabelHelp",this.dom.label).bind("click.VisualEvent",function(){_4f._help();});$(this.dom.help).bind("click.VisualEvent",function(){_4f._hideHelp();});},"_createEvent":function(_52,_53,_54){var evt=null,_55=$(_54).offset(),_56=this._eventTypeGroup(_53);if(_2.createEvent){switch(_56){case "mouse":evt=_2.createEvent("MouseEvents");evt.initMouseEvent(_53,true,true,_1,0,_55.left,_55.top,_55.left,_55.top,_52.ctrlKey,_52.altKey,_52.shiftKey,_52.metaKey,_52.button,null);break;case "html":evt=_2.createEvent("HTMLEvents");evt.initEvent(_53,true,true);break;case "ui":evt=_2.createEvent("UIEvents");evt.initUIEvent(_53,true,true,_1,0);break;default:break;}}else{if(_2.createEventObject){switch(_56){case "mouse":evt=_2.createEventObject();evt.screenX=_55.left;evt.screenX=_55.top;evt.clientX=_55.left;evt.clientY=_55.top;evt.ctrlKey=_52.ctrlKey;evt.altKey=_52.altKey;evt.metaKey=_52.metaKey;evt.button=_52.button;evt.relatedTarget=null;break;case "html":case "ui":evt=_2.createEventObject();break;default:break;}}}return evt;},"_timerClear":function(){if(this.s.mouseTimer!==null){clearTimeout(this.s.mouseTimer);this.s.mouseTimer=null;}},"_eventTypeGroup":function(_57){switch(_57){case "click":case "dblclick":case "mousedown":case "mousemove":case "mouseout":case "mouseover":case "mouseup":case "scroll":return "mouse";case "change":case "focus":case "blur":case "select":case "submit":return "html";case "keydown":case "keypress":case "keyup":case "load":case "unload":return "ui";default:return "custom";}},"_getColorFromTypes":function(_58){var _59=false,_5a=false,_5b=false,_5c,i=0;for(i=0;i<_58.length;i+=1){_5c=this._eventTypeGroup(_58[i].type);switch(_5c){case "mouse":_59=true;break;case "html":_5a=true;break;case "ui":_5b=true;break;default:_5b=true;break;}}if(_59&&_5a&&_5b){return "black";}if(!_59&&_5a&&_5b){return "orange";}if(_59&&!_5a&&_5b){return "purple";}if(_59&&_5a&&!_5b){return "green";}if(_59){return "blue";}if(_5a){return "yellow";}if(_5b){return "red";}return "white";}};}(window,document,jQuery));