Backbone.ChildViewContainer=(function(_1,_2){var _3=function(_4){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();_2.each(_4,this.add,this);};_2.extend(_3.prototype,{add:function(_5,_6){var _7=_5.cid;this._views[_7]=_5;if(_5.model){this._indexByModel[_5.model.cid]=_7;}if(_6){this._indexByCustom[_6]=_7;}this._updateLength();},findByModel:function(_8){return this.findByModelCid(_8.cid);},findByModelCid:function(_9){var _a=this._indexByModel[_9];return this.findByCid(_a);},findByCustom:function(_b){var _c=this._indexByCustom[_b];return this.findByCid(_c);},findByIndex:function(_d){return _2.values(this._views)[_d];},findByCid:function(_e){return this._views[_e];},remove:function(_f){var _10=_f.cid;if(_f.model){delete this._indexByModel[_f.model.cid];}_2.any(this._indexByCustom,function(cid,key){if(cid===_10){delete this._indexByCustom[key];return true;}},this);delete this._views[_10];this._updateLength();},call:function(_11){this.apply(_11,_2.tail(arguments));},apply:function(_12,_13){_2.each(this._views,function(_14){if(_2.isFunction(_14[_12])){_14[_12].apply(_14,_13||[]);}});},_updateLength:function(){this.length=_2.size(this._views);}});var _15=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];_2.each(_15,function(_16){_3.prototype[_16]=function(){var _17=_2.values(this._views);var _18=[_17].concat(_2.toArray(arguments));return _2[_16].apply(_2,_18);};});return _3;})(Backbone,_);Backbone.Wreqr=(function(_19,_1a,_1b){"use strict";var _1c={};_1c.Handlers=(function(_1d,_1e){"use strict";var _1f=function(_20){this.options=_20;this._wreqrHandlers={};if(_1e.isFunction(this.initialize)){this.initialize(_20);}};_1f.extend=_1d.Model.extend;_1e.extend(_1f.prototype,_1d.Events,{setHandlers:function(_21){_1e.each(_21,function(_22,_23){var _24=null;if(_1e.isObject(_22)&&!_1e.isFunction(_22)){_24=_22.context;_22=_22.callback;}this.setHandler(_23,_22,_24);},this);},setHandler:function(_25,_26,_27){var _28={callback:_26,context:_27};this._wreqrHandlers[_25]=_28;this.trigger("handler:add",_25,_26,_27);},hasHandler:function(_29){return !!this._wreqrHandlers[_29];},getHandler:function(_2a){var _2b=this._wreqrHandlers[_2a];if(!_2b){throw new Error("Handler not found for '"+_2a+"'");}return function(){var _2c=Array.prototype.slice.apply(arguments);return _2b.callback.apply(_2b.context,_2c);};},removeHandler:function(_2d){delete this._wreqrHandlers[_2d];},removeAllHandlers:function(){this._wreqrHandlers={};}});return _1f;})(_19,_1b);_1c.CommandStorage=(function(){"use strict";var _2e=function(_2f){this.options=_2f;this._commands={};if(_1b.isFunction(this.initialize)){this.initialize(_2f);}};_1b.extend(_2e.prototype,_19.Events,{getCommands:function(_30){var _31=this._commands[_30];if(!_31){_31={command:_30,instances:[]};this._commands[_30]=_31;}return _31;},addCommand:function(_32,_33){var _34=this.getCommands(_32);_34.instances.push(_33);},clearCommands:function(_35){var _36=this.getCommands(_35);_36.instances=[];}});return _2e;})();_1c.Commands=(function(_37){"use strict";return _37.Handlers.extend({storageType:_37.CommandStorage,constructor:function(_38){this.options=_38||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var _39=Array.prototype.slice.call(arguments);_37.Handlers.prototype.constructor.apply(this,_39);},execute:function(_3a,_3b){_3a=arguments[0];_3b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(_3a)){this.getHandler(_3a).apply(this,_3b);}else{this.storage.addCommand(_3a,_3b);}},_executeCommands:function(_3c,_3d,_3e){var _3f=this.storage.getCommands(_3c);_1b.each(_3f.instances,function(_40){_3d.apply(_3e,_40);});this.storage.clearCommands(_3c);},_initializeStorage:function(_41){var _42;var _43=_41.storageType||this.storageType;if(_1b.isFunction(_43)){_42=new _43();}else{_42=_43;}this.storage=_42;}});})(_1c);_1c.RequestResponse=(function(_44){"use strict";return _44.Handlers.extend({request:function(){var _45=arguments[0];var _46=Array.prototype.slice.call(arguments,1);return this.getHandler(_45).apply(this,_46);}});})(_1c);_1c.EventAggregator=(function(_47,_48){"use strict";var EA=function(){};EA.extend=_47.Model.extend;_48.extend(EA.prototype,_47.Events);return EA;})(_19,_1b);return _1c;})(Backbone,Backbone.Marionette,_);var Marionette=(function(_49,_4a,_4b){"use strict";var _4c={};_4a.Marionette=_4c;_4c.$=_4a.$;var _4d=Array.prototype.slice;function _4e(_4f){return _4d.call(_4f);};function _50(_51,_52){var _53=new Error(_51);_53.name=_52||"Error";throw _53;};_4c.extend=_4a.Model.extend;_4c.getOption=function(_54,_55){if(!_54||!_55){return;}var _56;if(_54.options&&(_55 in _54.options)&&(_54.options[_55]!==undefined)){_56=_54.options[_55];}else{_56=_54[_55];}return _56;};_4c.triggerMethod=(function(){var _57=/(^|:)(\w)/gi;function _58(_59,_5a,_5b){return _5b.toUpperCase();};var _5c=function(_5d){var _5e="on"+_5d.replace(_57,_58);var _5f=this[_5e];if(_4b.isFunction(this.trigger)){this.trigger.apply(this,arguments);}if(_4b.isFunction(_5f)){return _5f.apply(this,_4b.tail(arguments));}};return _5c;})();_4c.MonitorDOMRefresh=(function(){function _60(_61){_61._isShown=true;_62(_61);};function _63(_64){_64._isRendered=true;_62(_64);};function _62(_65){if(_65._isShown&&_65._isRendered){if(_4b.isFunction(_65.triggerMethod)){_65.triggerMethod("dom:refresh");}}};return function(_66){_66.listenTo(_66,"show",function(){_60(_66);});_66.listenTo(_66,"render",function(){_63(_66);});};})();(function(_67){"use strict";function _68(_69,_6a,evt,_6b){var _6c=_6b.split(/\s+/);_4b.each(_6c,function(_6d){var _6e=_69[_6d];if(!_6e){_50("Method '"+_6d+"' was configured as an event handler, but does not exist.");}_69.listenTo(_6a,evt,_6e,_69);});};function _6f(_70,_71,evt,_72){_70.listenTo(_71,evt,_72,_70);};function _73(_74,_75,evt,_76){var _77=_76.split(/\s+/);_4b.each(_77,function(_78){var _79=_74[_78];_74.stopListening(_75,evt,_79,_74);});};function _7a(_7b,_7c,evt,_7d){_7b.stopListening(_7c,evt,_7d,_7b);};function _7e(_7f,_80,_81,_82,_83){if(!_80||!_81){return;}if(_4b.isFunction(_81)){_81=_81.call(_7f);}_4b.each(_81,function(_84,evt){if(_4b.isFunction(_84)){_82(_7f,_80,evt,_84);}else{_83(_7f,_80,evt,_84);}});};_67.bindEntityEvents=function(_85,_86,_87){_7e(_85,_86,_87,_6f,_68);};_67.unbindEntityEvents=function(_88,_89,_8a){_7e(_88,_89,_8a,_7a,_73);};})(_4c);_4c.Callbacks=function(){this._deferred=_4c.$.Deferred();this._callbacks=[];};_4b.extend(_4c.Callbacks.prototype,{add:function(_8b,_8c){this._callbacks.push({cb:_8b,ctx:_8c});this._deferred.done(function(_8d,_8e){if(_8c){_8d=_8c;}_8b.call(_8d,_8e);});},run:function(_8f,_90){this._deferred.resolve(_90,_8f);},reset:function(){var _91=this._callbacks;this._deferred=_4c.$.Deferred();this._callbacks=[];_4b.each(_91,function(cb){this.add(cb.cb,cb.ctx);},this);}});_4c.Controller=function(_92){this.triggerMethod=_4c.triggerMethod;this.options=_92||{};if(_4b.isFunction(this.initialize)){this.initialize(this.options);}};_4c.Controller.extend=_4c.extend;_4b.extend(_4c.Controller.prototype,_4a.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind();}});_4c.Region=function(_93){this.options=_93||{};this.el=_4c.getOption(this,"el");if(!this.el){var err=new Error("An 'el' must be specified for a region.");err.name="NoElError";throw err;}if(this.initialize){var _94=Array.prototype.slice.apply(arguments);this.initialize.apply(this,_94);}};_4b.extend(_4c.Region,{buildRegion:function(_95,_96){var _97=(typeof _95==="string");var _98=(typeof _95.selector==="string");var _99=(typeof _95.regionType==="undefined");var _9a=(typeof _95==="function");if(!_9a&&!_97&&!_98){throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");}var _9b,_9c;if(_97){_9b=_95;}if(_95.selector){_9b=_95.selector;}if(_9a){_9c=_95;}if(!_9a&&_99){_9c=_96;}if(_95.regionType){_9c=_95.regionType;}var _9d=new _9c({el:_9b});if(_95.parentEl){_9d.getEl=function(_9e){var _9f=_95.parentEl;if(_4b.isFunction(_9f)){_9f=_9f();}return _9f.find(_9e);};}return _9d;}});_4b.extend(_4c.Region.prototype,_4a.Events,{show:function(_a0){this.ensureEl();var _a1=_a0.isClosed||_4b.isUndefined(_a0.$el);var _a2=_a0!==this.currentView;if(_a2){this.close();}_a0.render();if(_a2||_a1){this.open(_a0);}this.currentView=_a0;_4c.triggerMethod.call(this,"show",_a0);_4c.triggerMethod.call(_a0,"show");},ensureEl:function(){if(!this.$el||this.$el.length===0){this.$el=this.getEl(this.el);}},getEl:function(_a3){return _4c.$(_a3);},open:function(_a4){this.$el.empty().append(_a4.el);},close:function(){var _a5=this.currentView;if(!_a5||_a5.isClosed){return;}if(_a5.close){_a5.close();}else{if(_a5.remove){_a5.remove();}}_4c.triggerMethod.call(this,"close");delete this.currentView;},attachView:function(_a6){this.currentView=_a6;},reset:function(){this.close();delete this.$el;}});_4c.Region.extend=_4c.extend;_4c.RegionManager=(function(_a7){var _a8=_a7.Controller.extend({constructor:function(_a9){this._regions={};_a7.Controller.prototype.constructor.call(this,_a9);},addRegions:function(_aa,_ab){var _ac={};_4b.each(_aa,function(_ad,_ae){if(typeof _ad==="string"){_ad={selector:_ad};}if(_ad.selector){_ad=_4b.defaults({},_ad,_ab);}var _af=this.addRegion(_ae,_ad);_ac[_ae]=_af;},this);return _ac;},addRegion:function(_b0,_b1){var _b2;var _b3=_4b.isObject(_b1);var _b4=_4b.isString(_b1);var _b5=!!_b1.selector;if(_b4||(_b3&&_b5)){_b2=_a7.Region.buildRegion(_b1,_a7.Region);}else{if(_4b.isFunction(_b1)){_b2=_a7.Region.buildRegion(_b1,_a7.Region);}else{_b2=_b1;}}this._store(_b0,_b2);this.triggerMethod("region:add",_b0,_b2);return _b2;},get:function(_b6){return this._regions[_b6];},removeRegion:function(_b7){var _b8=this._regions[_b7];this._remove(_b7,_b8);},removeRegions:function(){_4b.each(this._regions,function(_b9,_ba){this._remove(_ba,_b9);},this);},closeRegions:function(){_4b.each(this._regions,function(_bb,_bc){_bb.close();},this);},close:function(){this.removeRegions();var _bd=Array.prototype.slice.call(arguments);_a7.Controller.prototype.close.apply(this,_bd);},_store:function(_be,_bf){this._regions[_be]=_bf;this._setLength();},_remove:function(_c0,_c1){_c1.close();delete this._regions[_c0];this._setLength();this.triggerMethod("region:remove",_c0,_c1);},_setLength:function(){this.length=_4b.size(this._regions);}});var _c2=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];_4b.each(_c2,function(_c3){_a8.prototype[_c3]=function(){var _c4=_4b.values(this._regions);var _c5=[_c4].concat(_4b.toArray(arguments));return _4b[_c3].apply(_4b,_c5);};});return _a8;})(_4c);_4c.TemplateCache=function(_c6){this.templateId=_c6;};_4b.extend(_4c.TemplateCache,{templateCaches:{},get:function(_c7){var _c8=this.templateCaches[_c7];if(!_c8){_c8=new _4c.TemplateCache(_c7);this.templateCaches[_c7]=_c8;}return _c8.load();},clear:function(){var i;var _c9=_4e(arguments);var _ca=_c9.length;if(_ca>0){for(i=0;i<_ca;i++){delete this.templateCaches[_c9[i]];}}else{this.templateCaches={};}}});_4b.extend(_4c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate){return this.compiledTemplate;}var _cb=this.loadTemplate(this.templateId);this.compiledTemplate=this.compileTemplate(_cb);return this.compiledTemplate;},loadTemplate:function(_cc){var _cd=_4c.$(_cc).html();if(!_cd||_cd.length===0){_50("Could not find template: '"+_cc+"'","NoTemplateError");}return _cd;},compileTemplate:function(_ce){return _4b.template(_ce);}});_4c.Renderer={render:function(_cf,_d0){if(!_cf){var _d1=new Error("Cannot render the template since it's false, null or undefined.");_d1.name="TemplateNotFoundError";throw _d1;}var _d2;if(typeof _cf==="function"){_d2=_cf;}else{_d2=_4c.TemplateCache.get(_cf);}return _d2(_d0);}};_4c.View=_4a.View.extend({constructor:function(_d3){_4b.bindAll(this,"render");var _d4=Array.prototype.slice.apply(arguments);this.options=_d3||{};_4a.View.prototype.constructor.apply(this,_d4);_4c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this);},triggerMethod:_4c.triggerMethod,getTemplate:function(){return _4c.getOption(this,"template");},mixinTemplateHelpers:function(_d5){_d5=_d5||{};var _d6=_4c.getOption(this,"templateHelpers");if(_4b.isFunction(_d6)){_d6=_d6.call(this);}return _4b.extend(_d5,_d6);},configureTriggers:function(){if(!this.triggers){return;}var _d7={};var _d8=_4b.result(this,"triggers");_4b.each(_d8,function(_d9,key){var _da=_4b.isObject(_d9);var _db=_da?_d9.event:_d9;_d7[key]=function(e){if(e){var _dc=e.preventDefault;var _dd=e.stopPropagation;var _de=_da?_d9.preventDefault:_dc;var _df=_da?_d9.stopPropagation:_dd;if(_de&&_dc){_dc.apply(e);}if(_df&&_dd){_dd.apply(e);}}var _e0={view:this,model:this.model,collection:this.collection};this.triggerMethod(_db,_e0);};},this);return _d7;},delegateEvents:function(_e1){this._delegateDOMEvents(_e1);_4c.bindEntityEvents(this,this.model,_4c.getOption(this,"modelEvents"));_4c.bindEntityEvents(this,this.collection,_4c.getOption(this,"collectionEvents"));},_delegateDOMEvents:function(_e2){_e2=_e2||this.events;if(_4b.isFunction(_e2)){_e2=_e2.call(this);}var _e3={};var _e4=this.configureTriggers();_4b.extend(_e3,_e2,_e4);_4a.View.prototype.delegateEvents.call(this,_e3);},undelegateEvents:function(){var _e5=Array.prototype.slice.call(arguments);_4a.View.prototype.undelegateEvents.apply(this,_e5);_4c.unbindEntityEvents(this,this.model,_4c.getOption(this,"modelEvents"));_4c.unbindEntityEvents(this,this.collection,_4c.getOption(this,"collectionEvents"));},onShowCalled:function(){},close:function(){if(this.isClosed){return;}var _e6=this.triggerMethod("before:close");if(_e6===false){return;}this.isClosed=true;this.triggerMethod("close");this.unbindUIElements();this.remove();},bindUIElements:function(){if(!this.ui){return;}if(!this._uiBindings){this._uiBindings=this.ui;}var _e7=_4b.result(this,"_uiBindings");this.ui={};_4b.each(_4b.keys(_e7),function(key){var _e8=_e7[key];this.ui[key]=this.$(_e8);},this);},unbindUIElements:function(){if(!this.ui||!this._uiBindings){return;}_4b.each(this.ui,function($el,_e9){delete this.ui[_e9];},this);this.ui=this._uiBindings;delete this._uiBindings;}});_4c.ItemView=_4c.View.extend({constructor:function(){_4c.View.prototype.constructor.apply(this,_4e(arguments));},serializeData:function(){var _ea={};if(this.model){_ea=this.model.toJSON();}else{if(this.collection){_ea={items:this.collection.toJSON()};}}return _ea;},render:function(){this.isClosed=false;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var _eb=this.serializeData();_eb=this.mixinTemplateHelpers(_eb);var _ec=this.getTemplate();var _ed=_4c.Renderer.render(_ec,_eb);this.$el.html(_ed);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this;},close:function(){if(this.isClosed){return;}this.triggerMethod("item:before:close");_4c.View.prototype.close.apply(this,_4e(arguments));this.triggerMethod("item:closed");}});_4c.CollectionView=_4c.View.extend({itemViewEventPrefix:"itemview",constructor:function(_ee){this._initChildViewStorage();_4c.View.prototype.constructor.apply(this,_4e(arguments));this._initialEvents();},_initialEvents:function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this.render,this);}},addChildView:function(_ef,_f0,_f1){this.closeEmptyView();var _f2=this.getItemView(_ef);var _f3=this.collection.indexOf(_ef);this.addItemView(_ef,_f2,_f3);},onShowCalled:function(){this.children.each(function(_f4){_4c.triggerMethod.call(_f4,"show");});},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this);},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this);},render:function(){this.isClosed=false;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this;},_renderChildren:function(){this.closeEmptyView();this.closeChildren();if(this.collection&&this.collection.length>0){this.showCollection();}else{this.showEmptyView();}},showCollection:function(){var _f5;this.collection.each(function(_f6,_f7){_f5=this.getItemView(_f6);this.addItemView(_f6,_f5,_f7);},this);},showEmptyView:function(){var _f8=this.getEmptyView();if(_f8&&!this._showingEmptyView){this._showingEmptyView=true;var _f9=new _4a.Model();this.addItemView(_f9,_f8,0);}},closeEmptyView:function(){if(this._showingEmptyView){this.closeChildren();delete this._showingEmptyView;}},getEmptyView:function(){return _4c.getOption(this,"emptyView");},getItemView:function(_fa){var _fb=_4c.getOption(this,"itemView");if(!_fb){_50("An `itemView` must be specified","NoItemViewError");}return _fb;},addItemView:function(_fc,_fd,_fe){var _ff=_4c.getOption(this,"itemViewOptions");if(_4b.isFunction(_ff)){_ff=_ff.call(this,_fc,_fe);}var view=this.buildItemView(_fc,_fd,_ff);this.addChildViewEventForwarding(view);this.triggerMethod("before:item:added",view);this.children.add(view);this.renderItemView(view,_fe);if(this._isShown){_4c.triggerMethod.call(view,"show");}this.triggerMethod("after:item:added",view);},addChildViewEventForwarding:function(view){var _100=_4c.getOption(this,"itemViewEventPrefix");this.listenTo(view,"all",function(){var args=_4e(arguments);args[0]=_100+":"+args[0];args.splice(1,0,view);_4c.triggerMethod.apply(this,args);},this);},renderItemView:function(view,_101){view.render();this.appendHtml(this,view,_101);},buildItemView:function(item,_102,_103){var _104=_4b.extend({model:item},_103);return new _102(_104);},removeItemView:function(item){var view=this.children.findByModel(item);this.removeChildView(view);this.checkEmpty();},removeChildView:function(view){if(view){this.stopListening(view);if(view.close){view.close();}else{if(view.remove){view.remove();}}this.children.remove(view);}this.triggerMethod("item:removed",view);},checkEmpty:function(){if(!this.collection||this.collection.length===0){this.showEmptyView();}},appendHtml:function(_105,_106,_107){_105.$el.append(_106.el);},_initChildViewStorage:function(){this.children=new _4a.ChildViewContainer();},close:function(){if(this.isClosed){return;}this.triggerMethod("collection:before:close");this.closeChildren();this.triggerMethod("collection:closed");_4c.View.prototype.close.apply(this,_4e(arguments));},closeChildren:function(){this.children.each(function(_108){this.removeChildView(_108);},this);this.checkEmpty();}});_4c.CompositeView=_4c.CollectionView.extend({constructor:function(){_4c.CollectionView.prototype.constructor.apply(this,_4e(arguments));},_initialEvents:function(){this.once("render",function(){if(this.collection){this.listenTo(this.collection,"add",this.addChildView,this);this.listenTo(this.collection,"remove",this.removeItemView,this);this.listenTo(this.collection,"reset",this._renderChildren,this);}});},getItemView:function(item){var _109=_4c.getOption(this,"itemView")||this.constructor;if(!_109){_50("An `itemView` must be specified","NoItemViewError");}return _109;},serializeData:function(){var data={};if(this.model){data=this.model.toJSON();}return data;},render:function(){this.isRendered=true;this.isClosed=false;this.resetItemViewContainer();this.triggerBeforeRender();var html=this.renderModel();this.$el.html(html);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this;},_renderChildren:function(){if(this.isRendered){_4c.CollectionView.prototype._renderChildren.call(this);this.triggerMethod("composite:collection:rendered");}},renderModel:function(){var data={};data=this.serializeData();data=this.mixinTemplateHelpers(data);var _10a=this.getTemplate();return _4c.Renderer.render(_10a,data);},appendHtml:function(cv,iv,_10b){var _10c=this.getItemViewContainer(cv);_10c.append(iv.el);},getItemViewContainer:function(_10d){if("$itemViewContainer" in _10d){return _10d.$itemViewContainer;}var _10e;var _10f=_4c.getOption(_10d,"itemViewContainer");if(_10f){var _110=_4b.isFunction(_10f)?_10f():_10f;_10e=_10d.$(_110);if(_10e.length<=0){_50("The specified `itemViewContainer` was not found: "+_10d.itemViewContainer,"ItemViewContainerMissingError");}}else{_10e=_10d.$el;}_10d.$itemViewContainer=_10e;return _10e;},resetItemViewContainer:function(){if(this.$itemViewContainer){delete this.$itemViewContainer;}}});_4c.Layout=_4c.ItemView.extend({regionType:_4c.Region,constructor:function(_111){_111=_111||{};this._firstRender=true;this._initializeRegions(_111);_4c.ItemView.prototype.constructor.call(this,_111);},render:function(){if(this.isClosed){this._initializeRegions();}if(this._firstRender){this._firstRender=false;}else{if(!this.isClosed){this._reInitializeRegions();}}var args=Array.prototype.slice.apply(arguments);var _112=_4c.ItemView.prototype.render.apply(this,args);return _112;},close:function(){if(this.isClosed){return;}this.regionManager.close();var args=Array.prototype.slice.apply(arguments);_4c.ItemView.prototype.close.apply(this,args);},addRegion:function(name,_113){var _114={};_114[name]=_113;return this._buildRegions(_114)[name];},addRegions:function(_115){this.regions=_4b.extend({},this.regions,_115);return this._buildRegions(_115);},removeRegion:function(name){delete this.regions[name];return this.regionManager.removeRegion(name);},_buildRegions:function(_116){var that=this;var _117={regionType:_4c.getOption(this,"regionType"),parentEl:function(){return that.$el;}};return this.regionManager.addRegions(_116,_117);},_initializeRegions:function(_118){var _119;this._initRegionManager();if(_4b.isFunction(this.regions)){_119=this.regions(_118);}else{_119=this.regions||{};}this.addRegions(_119);},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(_11a){_11a.reset();});},_initRegionManager:function(){this.regionManager=new _4c.RegionManager();this.listenTo(this.regionManager,"region:add",function(name,_11b){this[name]=_11b;this.trigger("region:add",name,_11b);});this.listenTo(this.regionManager,"region:remove",function(name,_11c){delete this[name];this.trigger("region:remove",name,_11c);});}});_4c.AppRouter=_4a.Router.extend({constructor:function(_11d){_4a.Router.prototype.constructor.apply(this,_4e(arguments));this.options=_11d||{};var _11e=_4c.getOption(this,"appRoutes");var _11f=this._getController();this.processAppRoutes(_11f,_11e);},appRoute:function(_120,_121){var _122=this._getController();this._addAppRoute(_122,_120,_121);},processAppRoutes:function(_123,_124){if(!_124){return;}var _125=_4b.keys(_124).reverse();_4b.each(_125,function(_126){this._addAppRoute(_123,_126,_124[_126]);},this);},_getController:function(){return _4c.getOption(this,"controller");},_addAppRoute:function(_127,_128,_129){var _12a=_127[_129];if(!_12a){throw new Error("Method '"+_129+"' was not found on the controller");}this.route(_128,_129,_4b.bind(_12a,_127));}});_4c.Application=function(_12b){this._initRegionManager();this._initCallbacks=new _4c.Callbacks();this.vent=new _4a.Wreqr.EventAggregator();this.commands=new _4a.Wreqr.Commands();this.reqres=new _4a.Wreqr.RequestResponse();this.submodules={};_4b.extend(this,_12b);this.triggerMethod=_4c.triggerMethod;};_4b.extend(_4c.Application.prototype,_4a.Events,{execute:function(){var args=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,args);},request:function(){var args=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,args);},addInitializer:function(_12c){this._initCallbacks.add(_12c);},start:function(_12d){this.triggerMethod("initialize:before",_12d);this._initCallbacks.run(_12d,this);this.triggerMethod("initialize:after",_12d);this.triggerMethod("start",_12d);},addRegions:function(_12e){return this._regionManager.addRegions(_12e);},closeRegions:function(){this._regionManager.closeRegions();},removeRegion:function(_12f){this._regionManager.removeRegion(_12f);},getRegion:function(_130){return this._regionManager.get(_130);},_initRegionManager:function(){this._regionManager=new _4c.RegionManager();this.listenTo(this._regionManager,"region:add",function(name,_131){this[name]=_131;});this.listenTo(this._regionManager,"region:remove",function(name,_132){delete this[name];});}});_4c.Application.extend=_4c.extend;return _4c;})(this,Backbone,_);